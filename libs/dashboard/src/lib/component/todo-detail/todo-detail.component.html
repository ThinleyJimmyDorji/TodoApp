<div class="header-container"><angular-nx-header></angular-nx-header></div>
<div class="card-container">
  <div class="card-wrap">
    <mat-card class="detail-card" *ngIf="tasks$ | async as task">
      <div class="heading">
        <div class="detail-top">
          <div class="title">
            <mat-card-title>{{ task.title }}</mat-card-title>
          </div>
          <div class="status-container" [ngClass]="'status-' + task.status">
            <span>{{ task.status }}</span>
          </div>
        </div>
        <div class="start-time">
          <mat-card-subtitle>
            <strong>Start Time: </strong>{{ task.startTime }}</mat-card-subtitle
          >
        </div>
        <div class="end-time">
          <mat-card-subtitle
            ><strong>End time:</strong>{{ task.endTime }}</mat-card-subtitle
          >
        </div>
      </div>
      <mat-card-content>
        <div class="detail" *ngIf="task">
          <h4>
            <strong>Description</strong>
            <p>{{ task.description }}</p>
          </h4>
        </div>
        <div class="tags">
          <ng-container *ngFor="let dependency of task.dependencies">
            <div class="tags-container" *ngIf="dependency.dependency">
              <span>{{ dependency?.dependency }}</span>
            </div>
          </ng-container>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <div class="action-container">
          <div class="back-arrow">
            <div class="back-button-container">
              <button mat-icon-button (click)="goBack()">
                <mat-icon class="material-icons-outlined">
                  arrow_back
                </mat-icon>
              </button>
            </div>
          </div>
          <div class="mark-as-done" *ngIf="task.status === 'pending'">
            <div class="message">
              <span>Mark as done</span>
            </div>
            <div class="check-button">
              <button mat-icon-button (click)="changeStatus(task)">
                <mat-icon class="material-icons-outlined">
                  check_circle
                </mat-icon>
              </button>
            </div>
          </div>
        </div>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
