"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateComponentStyles = void 0;
const ts = require("typescript");
const ast_utils_1 = require("@nrwl/workspace/src/utilities/ast-utils");
const ast_utils_2 = require("../../../utils/nx-devkit/ast-utils");
const nrwl_home_tpl_1 = require("./nrwl-home-tpl");
function updateComponentStyles(host, options) {
    const content = nrwl_home_tpl_1.nrwlHomeTemplate.css;
    if (!options.inlineStyle) {
        const filesMap = {
            css: `${options.appProjectRoot}/src/app/app.component.css`,
            scss: `${options.appProjectRoot}/src/app/app.component.scss`,
            less: `${options.appProjectRoot}/src/app/app.component.less`,
        };
        host.write(filesMap[options.style], content);
        return;
    }
    // Inline component update
    const componentPath = `${options.appProjectRoot}/src/app/app.component.ts`;
    const templateNodeValue = ast_utils_2.getDecoratorPropertyValueNode(host, componentPath, 'Component', 'styles', '@angular/core');
    ast_utils_1.replaceNodeValue(host, ts.createSourceFile(componentPath, host.read(componentPath, 'utf-8'), ts.ScriptTarget.Latest, true), componentPath, templateNodeValue, `[\`\n${content}\n\`],\n`);
}
exports.updateComponentStyles = updateComponentStyles;
//# sourceMappingURL=update-component-styles.js.map